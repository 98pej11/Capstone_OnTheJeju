# ë””ìì¸ íŒ¨í„´ ì ìš©

## ê°ì²´ì§€í•­ì˜ ì˜¤í•´ì™€ ì‚¬ì‹¤, ë””ìì¸ íŒ¨í„´ ì ìš©

- â€œê°ì²´ ì§€í–¥ì˜ ì‚¬ì‹¤ê³¼ ì˜¤í•´â€ ì±…ì„ í†µí•´ ê°ì²´ ì§€í–¥ì˜ ì˜ë¯¸ë¥¼ ì¢€ ë” ì´í•´í•  ìˆ˜ ìˆëŠ” ê³„ê¸° ë˜ì—ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ "ê°ì²´ ì§€í–¥ ì–¸ì–´ì¸ ìë°”"ë¥¼ ì±…ì—ì„œ ë§í•œ ì—­í• , ì±…ì„, í˜‘ë ¥ì˜ ê´€ì ìœ¼ë¡œ ë°”ë¼ë³´ë©° ì„¤ê³„í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„
  ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ì´í›„ "ê°ì²´ ì§€í–¥ì˜ ì—­í• , ì±…ì„, í˜‘ë ¥"ì„ 23ê°€ì§€ íŒ¨í„´ìœ¼ë¡œ ë§Œë“  â€œGOFì˜ 23ê°€ì§€ ë””ìì¸ íŒ¨í„´â€ë„ í•™ìŠµí•˜ì—¬ ë³¸ í”„ë¡œì íŠ¸ì— ì ìš©í•˜ì—¬ ì¢€ë” ê°ì²´ ì§€í–¥ì ì¸ ì½”ë“œë¡œ ë°”ê¾¸ì—ˆìŠµë‹ˆë‹¤

([ë””ìì¸ íŒ¨í„´ í•™ìŠµ ë‚´ìš© ë§í¬](https://github.com/suheonjoo/Study-Document/tree/master/%EB%94%94%EC%9E%90%EC%9D%B8%20%ED%8C%A8%ED%84%B4))

### (1) "ê´€ê´‘ì§€ ìœ„ì¹˜" ì „ëµ íŒ¨í„´ ì ìš© -> ë” íš¨ê³¼ì ì¸ enum í™œìš©ì„ ì•Œê²Œ ë˜ì–´ ì—…ë°ì´íŠ¸

- ì „ëµ íŒ¨í„´: â€œìƒí™©ë‚´ìš©ì„ í¬í•¨í•˜ëŠ”(ê°€ì§€ê³  ìˆëŠ”) ì—­í• â€ê³¼ â€œìƒí™©ì— ë”°ë¥¸ ë‹¤ì–‘í•œ ì „ëµì„ í¬í•¨í•˜ëŠ” ì—­í• â€ì„ ë‚˜ëˆ„ì–´ ì „ëµë“¤ì„ ë¶„ë¦¬í•˜ëŠ” íŒ¨í„´ì„ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤ ì €ëŠ” ë™ì„œë‚¨ë¶ì˜ í´ë˜ìŠ¤ë¥¼ ë”°ë¡œ ë¶„ë¦¬í•˜ì—¬ "ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì§€ê³ 
  ìˆëŠ” ì—­í• "ì„ ë§Œë“¤ê³ , ì´ëŸ¬í•œ "ìœ„ì¹˜ ì •ë³´ë¥¼ ê´€ë¦¬í•˜ëŠ” ì—­í• " LocationStrategy ì¸í„°í˜ì´ìŠ¤ë¥¼ ë§Œë“¤ì–´ ê°ì²´ë“¤ê°„ì˜ í˜‘ë ¥ ê´€ê³„ë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤

<img  alt="stragetyPatternPackage" src="./img/stragetyPatternPackage.png?raw=true" width = "30%" height = "30%"  >
<img  alt="stragetyPatternExample" src="./img/stragetyPatternExample.png?raw=true" width = "30%" height = "30%"  >

- ì „ëµ íŒ¨í„´ì„ ì‚¬ìš©í•œ ì´ìœ : í˜„ì¬ ë™ì„œë‚¨ë¶ìœ¼ë¡œ ìœ„ì¹˜ì •ë³´ë¥¼ ë¶„ë¦¬í•˜ ê²ƒì€ ì„¤ë¬¸ì¡°ì‚¬ì™€ ê° ìë³„ ê´€ê´‘ì§€ì˜ ê°œìˆ˜ë¥¼ ê³ ë ¤í•˜ì—¬ ì €í¬ ì„ì˜ì˜ ì ì ˆí•œ ì§€ì–µì„ ë‚˜ëˆ„ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” ê´€ê´‘ì§€ê°€ ìƒˆë¡œ ìƒê¸¸ìˆ˜ ìˆì–´ ì§€ì—­ë³„ ê´€ê´‘ì§€ ê°œìˆ˜ ë³€ê²½ì´
  ë˜ëŠ” ìš°ë ¤ê°€ ìˆì—ˆìŠµë‹ˆë‹¤ ê·¸ë˜ìƒˆ ìœ ì§€ë³´ìˆ˜ë¥¼ ë” í¸ë¦¬í•˜ê²Œ í•˜ê¸° ìœ„í•´ì„œ ì „ëµ íŒ¨í„´ì„ ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.

[ì»¤ë°‹ ê²½ë¡œ](https://github.com/suheonjoo/Capstone-JejuTourRecommend/commit/d4cb7eb58c30391103cde2f2489c7b8f27440cda)

<details>

  <summary> ì „ëµ íŒ¨í„´ ì½”ë“œ (ğŸ‘ˆ Click)</summary>

```java
public class DefaultLocation implements LocationStrategy{
    @Override
    public List<Location> getLocation() {

        List<Location> DefaultList = Arrays.asList(Location.Jeju_si, Location.Aewol_eup, Location.Hallim_eup,
                Location.Hangyeong_myeon, Location.Jocheon_eup, Location.Gujwa_eup,
                Location.Daejeong_eup, Location.Andeok_myeon, Location.Seogwipo_si,
                Location.Namwon_eup, Location.Pyoseon_myeon, Location.Seongsan_eup, Location.Udo_myeon
        );

        return DefaultList;
    }
}
```

```java

public class EastLocation implements LocationStrategy{
    @Override
    public List<Location> getLocation() {

        List<Location> eastList = Arrays.asList(Location.Namwon_eup, Location.Pyoseon_myeon, Location.Seongsan_eup);
        return eastList;
    }
}
```

```java

public interface LocationStrategy {

    List<Location> getLocation();

}

```

```java

public class NorthLocation implements LocationStrategy {
    @Override
    public List<Location> getLocation() {

        List<Location> northList = Arrays.asList(Location.Aewol_eup, Location.Jeju_si, Location.Jocheon_eup,
                Location.Gujwa_eup, Location.Udo_myeon);
        return northList;
    }
}

```

```java
public class SouthLocation implements LocationStrategy{
    @Override
    public List<Location> getLocation() {

        List<Location> southList = Arrays.asList(Location.Seogwipo_si);
        return southList;
    }
}

public class WestLocation implements LocationStrategy{
    @Override
    public List<Location> getLocation() {
        List<Location> southList = Arrays.asList(Location.Seogwipo_si);
        return southList;
    }
}
```

</details>

<details>

  <summary> enum íƒ€ì…ì˜ ì¬ë°œê²¬! ë³¸ë¬¸ í™•ì¸ (ğŸ‘ˆ Click)</summary>

#### enum íƒ€ì…ì˜ ì¬ë°œê²¬

[ë³¸ë¬¸ ë§í¬](https://github.com/suheonjoo/Study-Document/blob/master/%EC%A0%9C%EC%A3%BC%20%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%20%EA%B4%80%EB%A0%A8%20doc/%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%20doc/docs/%EC%9C%84%EC%B9%98%20%EB%8D%B0%EC%9D%B4%ED%84%B0%20enum%20%ED%85%8C%EC%9D%B4%EB%B8%94%EB%A1%9C%20%EA%B0%9C%EC%84%A0.md)


</details>

### (2) "ë©”íƒ€ ë°ì´í„°" ë¹Œë” íŒ¨í„´ ì ìš©

- ë¹Œë”íŒ¨í„´: â€œë§ì€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê´€ë¦¬í•˜ëŠ” ì—­í• â€ê³¼ â€œí•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ì—­í• â€ì„ ë§Œë“¤ì–´ ê¸°ì¡´ êµ¬ì¡°ë¥¼ ì„¸ë¶€ì (êµ¬ì²´ì )ìœ¼ë¡œ ë¶„ë¦¬ì‹œí‚¤ëŠ” íŒ¨í„´
- ë©”íƒ€ ë°ì´í„° ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê´€ë¦¬í•˜ëŠ” ì—­í–˜ì€ MetaDataBuilder ì¸í„°í˜ì´ìŠ¤ì—ê²Œ ì—­í•  ì£¼ì—ˆê³  ìƒí™©ë³„ ë©”íƒ€ë°ì´í„°ë¥¼ ìƒì„±í•˜ëŠ” ì—­í• ì€ MetaDataDirector í´ë˜ìŠ¤ì—ê²Œ ì—­í• ì„ ë¶€ì—¬í•˜ì—¬ ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤

<img  alt="builderPatternExample" src="./img/builderPatternExample.png?raw=true" width = "60%" height = "60%">
<img  alt="metaDataPackage" src="./img/metaDataPackage.png?raw=true" width = "30%" height = "30%">

- ë¹Œë” íŒ¨í„´ì„ ì‚¬ìš©í•œ ì´ìœ : ìƒˆë¡œìš´ ë©”íƒ€ ë°ì´í„°ê°€ ìƒê¸¸ë•Œë§ˆë‹¤ listì™€ mapì„ ì‚¬ìš©í•˜ì—¬ ì¼ì¼íˆ ì •ë³´ë¸” ë°˜í™˜í•˜ëŠ” ê²ƒì— ë²ˆê±°ë¡œì›€ì´ ìˆì—ˆìŠµë‹ˆë‹¤ ë˜í•œ ë©”íƒ€ë°ì´í„°ì˜ ì •ë³´ë¥¼ ìˆ˜ì •ë˜ëŠ” ê²½ìš°ë„ ë‹¤ìˆ˜ ë°œìƒí•˜ëŠ” ê²ƒì— ëŒ€ë¹„í•˜ì—¬ ìœ„ì™€
  ê°™ì´ ë¹Œë” íŒ¨í„´ì„ ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤

<details>

  <summary> ë¹Œë” íŒ¨í„´ ì½”ë“œ (ğŸ‘ˆ Click)</summary>

```java
public interface MetaDataBuilder {  
  
   MetaDataBuilder addMetaData(int id, String name);  
  
   MetaData getMetaDataDummy();  
}
```

```java
public class DefaultMetaDataBuilder implements MetaDataBuilder {  
  
   private List<MetaDataDetail> metaDataDetailList;  
  
   @Override  
   public MetaDataBuilder addMetaData(int id, String name) {  
      if (this.metaDataDetailList == null) {  
         this.metaDataDetailList = new ArrayList<>();  
      }  
      MetaDataDetail metaDataDetail = new MetaDataDetail(id, name);  
      this.metaDataDetailList.add(metaDataDetail);  
      return this;  
   }  
  
   @Override  
   public MetaData getMetaDataDummy() {  
      return new MetaData(metaDataDetailList);  
   }  
  
}
```


```java
@Data  
public class MetaData {  
  
   private List<MetaDataDetail> metaDataList;  
  
   public MetaData(List<MetaDataDetail> metaDataList) {  
      this.metaDataList = metaDataList;  
   }  
}
```

```java
@Data  
public class MetaDataDetail {  
  
   private int id;  
   private String name;  
  
   public MetaDataDetail(int id, String name) {  
      this.id = id;  
      this.name = name;  
   }  
}
```

```java
public class MetaDataDirector {  
  
   int id = 1;  
   private MetaDataBuilder metaDataBuilder;  
  
   public MetaDataDirector(MetaDataBuilder metaDataBuilder) {  
      this.metaDataBuilder = metaDataBuilder;  
   }  
  
   public MetaData categoryMetaData() {  
      return metaDataBuilder  
         .addMetaData(id++, "ì „ì²´")  
         .addMetaData(id++, "ë·°")  
         .addMetaData(id++, "ê°€ê²©")  
         .addMetaData(id++, "í¸ì˜ì‹œì„¤")  
         .addMetaData(id++, "ì„œë¹„ìŠ¤")  
         .getMetaDataDummy();  
   }  
  
   public MetaData locationMetaData() {  
      return metaDataBuilder  
         .addMetaData(id++, "ì „ì²´")  
         .addMetaData(id++, "ë¶ë¶€")  
         .addMetaData(id++, "ë‚¨ë¶€")  
         .addMetaData(id++, "ì„œë¶€")  
         .addMetaData(id++, "ë™ë¶€")  
         .getMetaDataDummy();  
   }  
  
}
```


</details>



### (3) "Service" Facade íŒ¨í„´ ì ìš©

- Facade íŒ¨í„´: "ì–´ë–¤ ì—­í• ë“¤ì˜ ì§‘í•©"ì„ ë§Œë“¤ì–´ í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì„ ë”°ë¡œ â€œí•œë²ˆì—â€ ê´€ë¦¬í•˜ëŠ” íŒ¨í„´ì…ë‹ˆë‹¤
- ë³¸ í”„ë¡œì íŠ¸ì—ì„œ Service ì—­í• ì„ @Transaction ì— readOnly ì˜µì…˜ì´ ë“¤ì–´ê°€ëŠ” ê³³ê³¼ ë“¤ì–´ê°€ê¸° Serviceì˜ ì—­í• ì„ ë¶„ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ @Transaction ì— readOnly ì˜µì…˜ ìœ ë®¤ì—
  ë”°ë¼ í´ë˜ìŠ¤ë¥¼ ë¶„ë¦¬í•˜ì˜€ìœ¼ë©°, í•´ë‹¹ í´ë˜ìŠ¤ë“¤ì„ Facade íŒ¨í„´ì„ ì‚¬ìš©í•˜ì—¬ ê°ì²´ ê´€ë¦¬í•˜ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.

<img  alt="FavoriteServiceFacade" src="./img/FavoriteServiceFacade.png?raw=true" width = "30%" height = "30%">

<img  alt="FavoriteServiceSeperate" src="./img/FavoriteServiceSeperate.png?raw=true" width = "30%" height = "30%">

(ì„±ëŠ¥ ìµœì í™” ë‚´ìš©ì€ "í”„ë¡œì íŠ¸ ì¢…ë£Œ ì´í›„ í˜¼ìì„œ ì§„í–‰í•œ ë¦¬íŒ©í† ë§"ì˜ 6. @Transaction ìµœì í™”ì— ìˆìŠµë‹ˆë‹¤)

- Facade íŒ¨í„´ì„ ì‚¬ìš©í•œ ì´ìœ : repository íŠ¹ì„±(readonly ìœ ë¬´)ë³„ë¡œ serviceë¥¼ ë¶„ë¦¬í•˜ì˜€ì§€ë§Œ, controller ì—ì„œ service ì¢…ë¥˜ì— ë”°ë¼ í˜¸ì¶œí•˜ê²Œ ë˜ë©´ ë³€ê²½ì‚¬í•­ì´ ìˆì„ì‹œ ìˆ˜ì •í• 
  ë¶€ë¶„ì´ ë‹¤ìˆ˜ë¼ ë³€ê²½ì´ ë²ˆê±°ë¡œì› ìŠµë‹ˆë‹¤. ë˜í•œ persentation ì˜ì—­ê³¼ application ì˜ì—­ì„ ë¶„ë¦¬í•˜ê¸° ìœ„í•´ ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ë¡œì¨, service í˜¸ì¶œí•˜ëŠ” ê³³ì„ í•œ ê³³ì— ê´€ë¦¬í•˜ì—¬ controllerê°€ "í•œ ê°œì˜ service"ì—ì„œ í˜¸ì¶œí•  ìˆ˜ ìˆë„ë¡ í•˜ì—¬ ìœ ì§€ë³´ìˆ˜ë¥¼ í¸ë¦¬í•˜ê²Œ í•˜ì˜€ìŠµë‹ˆë‹¤.


<details>

  <summary> Facade íŒ¨í„´ ì½”ë“œ (ğŸ‘ˆ Click)</summary>

```java
@Service  
@RequiredArgsConstructor  
public class FavoriteFacade {  
  
   private final FavoriteCommandUseCase favoriteCommandUseCase;  
  
   private final FavoriteQueryUseCase favoriteQueryUseCase;  
  
   public void postFavoriteForm(FavoriteSpotSaveDto favoriteSpotSaveDto) {  
      favoriteCommandUseCase.postFavoriteForm(favoriteSpotSaveDto);  
   }  
  
   public FavoriteDto newFavoriteList(WishListSaveDto wishListSaveDto) {  
      return favoriteCommandUseCase.newFavoriteList(wishListSaveDto);  
   }  
  
   public void deleteSpotInFavoriteList(Long favoriteId, Long spotId) {  
      favoriteCommandUseCase.deleteSpotInFavoriteList(favoriteId, spotId);  
   }  
  
   public WishListDto getFavoriteList(Long memberId, Pageable pageable) {  
      return favoriteQueryUseCase.getFavoriteList(memberId, pageable);  
   }  
  
   public void deleteFavoriteList(Long favoriteId) {  
  
      favoriteQueryUseCase.deleteFavoriteList(favoriteId);  
   }  
  
   public TopTenRecommendedSpotsDto recommendSpotList(Long favoriteId, List<Long> spotIdList) {  
  
      return favoriteQueryUseCase.recommendSpotList(favoriteId, spotIdList);  
  
   }  
  
   public FavoriteSpotsDto favoriteSpotList(Long favoriteId) {  
      return favoriteQueryUseCase.favoriteSpotList(favoriteId);  
  
   }  
  
}
```


</details>